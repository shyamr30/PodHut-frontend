{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\pipar\\\\Videos\\\\project\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pipar\\\\Videos\\\\project\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';var api=axios.create({baseURL:process.env.REACT_APP_API_URL,withCredentials:true,headers:{'Content-type':'application/json',Accept:'application/json'}});// List of all the endpoints\nexport var sendOtp=function sendOtp(data){return api.post('/api/send-otp',data);};export var verifyOtp=function verifyOtp(data){return api.post('/api/verify-otp',data);};export var activate=function activate(data){return api.post('/api/activate',data);};export var logout=function logout(){return api.post('/api/logout');};export var createRoom=function createRoom(data){return api.post('/api/rooms',data);};export var getAllRooms=function getAllRooms(){return api.get('/api/rooms');};export var getRoom=function getRoom(roomId){return api.get(\"/api/rooms/\".concat(roomId));};//Intercepters\napi.interceptors.response.use(function(config){return config;},/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(error){var originalRequest;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:originalRequest=error.config;if(!(error.response.status===401&&originalRequest&&!originalRequest._isRetry)){_context.next=12;break;}originalRequest.isRetry=true;_context.prev=3;_context.next=6;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/refresh\"),{withCredentials:true});case 6:return _context.abrupt(\"return\",api.request(originalRequest));case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);console.log(_context.t0.message);case 12:throw error;case 13:case\"end\":return _context.stop();}}},_callee,null,[[3,9]]);}));return function(_x){return _ref.apply(this,arguments);};}());export default api;","map":{"version":3,"sources":["C:/Users/pipar/Videos/project/frontend/src/http/index.js"],"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","withCredentials","headers","Accept","sendOtp","data","post","verifyOtp","activate","logout","createRoom","getAllRooms","get","getRoom","roomId","interceptors","response","use","config","error","originalRequest","status","_isRetry","isRetry","request","console","log","message"],"mappings":"gRAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,GAAG,CAAGD,KAAK,CAACE,MAAN,CAAa,CACrBC,OAAO,CAAEC,OAAO,CAACC,GAAR,CAAYC,iBADA,CAErBC,eAAe,CAAE,IAFI,CAGrBC,OAAO,CAAE,CACL,eAAgB,kBADX,CAELC,MAAM,CAAE,kBAFH,CAHY,CAAb,CAAZ,CASA;AACA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,IAAD,QAAUV,CAAAA,GAAG,CAACW,IAAJ,CAAS,eAAT,CAA0BD,IAA1B,CAAV,EAAhB,CACP,MAAO,IAAME,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACF,IAAD,QAAUV,CAAAA,GAAG,CAACW,IAAJ,CAAS,iBAAT,CAA4BD,IAA5B,CAAV,EAAlB,CACP,MAAO,IAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACH,IAAD,QAAUV,CAAAA,GAAG,CAACW,IAAJ,CAAS,eAAT,CAA0BD,IAA1B,CAAV,EAAjB,CACP,MAAO,IAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,SAAMd,CAAAA,GAAG,CAACW,IAAJ,CAAS,aAAT,CAAN,EAAf,CACP,MAAO,IAAMI,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACL,IAAD,QAAUV,CAAAA,GAAG,CAACW,IAAJ,CAAS,YAAT,CAAuBD,IAAvB,CAAV,EAAnB,CACP,MAAO,IAAMM,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAMhB,CAAAA,GAAG,CAACiB,GAAJ,CAAQ,YAAR,CAAN,EAApB,CACP,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,MAAD,QAAYnB,CAAAA,GAAG,CAACiB,GAAJ,sBAAsBE,MAAtB,EAAZ,EAAhB,CAGP;AACAnB,GAAG,CAACoB,YAAJ,CAAiBC,QAAjB,CAA0BC,GAA1B,CAA8B,SAACC,MAAD,CAAY,CAClC,MAAOA,CAAAA,MAAP,CACH,CAFL,0FAGA,iBAAOC,KAAP,sIACcC,eADd,CACgCD,KAAK,CAACD,MADtC,MAGWC,KAAK,CAACH,QAAN,CAAeK,MAAf,GAA0B,GAA1B,EAAiCD,eAAjC,EAAoD,CAACA,eAAe,CAACE,QAHhF,2BAIYF,eAAe,CAACG,OAAhB,CAA0B,IAA1B,CAJZ,sCAM0B7B,CAAAA,KAAK,CAACkB,GAAN,WACHd,OAAO,CAACC,GAAR,CAAYC,iBADT,iBAEN,CACIC,eAAe,CAAE,IADrB,CAFM,CAN1B,wCAa2BN,GAAG,CAAC6B,OAAJ,CAAYJ,eAAZ,CAb3B,0DAegBK,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB,EAfhB,aAmBcR,CAAAA,KAnBd,qEAHA,gEA2BA,cAAexB,CAAAA,GAAf","sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n    baseURL: process.env.REACT_APP_API_URL,\n    withCredentials: true,\n    headers: {\n        'Content-type': 'application/json',\n        Accept: 'application/json',\n    },\n});\n\n// List of all the endpoints\nexport const sendOtp = (data) => api.post('/api/send-otp', data);\nexport const verifyOtp = (data) => api.post('/api/verify-otp', data);\nexport const activate = (data) => api.post('/api/activate', data);\nexport const logout = () => api.post('/api/logout');\nexport const createRoom = (data) => api.post('/api/rooms', data);\nexport const getAllRooms = () => api.get('/api/rooms');\nexport const getRoom = (roomId) => api.get(`/api/rooms/${roomId}`);\n\n\n//Intercepters\napi.interceptors.response.use((config) => {\n        return config;\n    }, \nasync (error) => {\n        const originalRequest = error.config;\n\n        if(error.response.status === 401 && originalRequest && !originalRequest._isRetry) {\n            originalRequest.isRetry = true;\n            try {\n                    await axios.get(\n                    `${process.env.REACT_APP_API_URL}/api/refresh`,\n                    {\n                        withCredentials: true,\n                    }\n                    );\n\n                    return api.request(originalRequest);\n            } catch(err) {\n                console.log(err.message);\n\n            }\n        } \n        throw error;\n    }\n);\n\n\nexport default api;"]},"metadata":{},"sourceType":"module"}
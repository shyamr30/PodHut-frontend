{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\pipar\\\\Videos\\\\project\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\pipar\\\\Videos\\\\project\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pipar\\\\Videos\\\\project\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import{useEffect,useState}from'react';import{useDispatch}from'react-redux';import{setAuth}from'../store/authSlice';export function useLoadingWithRefresh(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var dispatch=useDispatch();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/refresh\"),{withCredentials:true});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;dispatch(setAuth(data));setLoading(false);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}))();},[]);return{loading:loading};}","map":{"version":3,"sources":["C:/Users/pipar/Videos/project/frontend/src/hooks/useLoadingWithRefresh.js"],"names":["axios","useEffect","useState","useDispatch","setAuth","useLoadingWithRefresh","loading","setLoading","dispatch","get","process","env","REACT_APP_API_URL","withCredentials","data","console","log"],"mappings":"uZAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,OAAT,KAAwB,oBAAxB,CAEA,MAAO,SAASC,CAAAA,qBAAT,EAAiC,CACpC,cAA8BH,QAAQ,CAAC,IAAD,CAAtC,wCAAOI,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,QAAQ,CAAGL,WAAW,EAA5B,CACAF,SAAS,CAAC,UAAK,CACX,wDAAC,mMAE4BD,CAAAA,KAAK,CAACS,GAAN,WAAaC,OAAO,CAACC,GAAR,CAAYC,iBAAzB,iBAA0D,CAC3EC,eAAe,CAAE,IAD0D,CAA1D,CAF5B,uCAEcC,IAFd,kBAEcA,IAFd,CAMON,QAAQ,CAACJ,OAAO,CAACU,IAAD,CAAR,CAAR,CACAP,UAAU,CAAC,KAAD,CAAV,CAPP,+EAUOQ,OAAO,CAACC,GAAR,cACAT,UAAU,CAAC,KAAD,CAAV,CAXP,oEAAD,KAcH,CAfQ,CAeN,EAfM,CAAT,CAiBA,MAAO,CAACD,OAAO,CAAPA,OAAD,CAAP,CAEH","sourcesContent":["import axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setAuth } from '../store/authSlice';\r\n\r\nexport function useLoadingWithRefresh() {\r\n    const [loading, setLoading] = useState(true);\r\n    const dispatch = useDispatch();\r\n    useEffect(() =>{\r\n        (async () => {\r\n            try {\r\n                const {data} = await axios.get(`${process.env.REACT_APP_API_URL}/api/refresh`, {\r\n                    withCredentials: true,\r\n                });\r\n\r\n                dispatch(setAuth(data));\r\n                setLoading(false);\r\n\r\n            } catch(err) {\r\n                console.log(err);\r\n                setLoading(false);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    return {loading};\r\n\r\n}"]},"metadata":{},"sourceType":"module"}